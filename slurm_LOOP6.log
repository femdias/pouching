
  ___  ____  ____  ____  ____ ®
 /__    /   ____/   /   ____/      18.0
___/   /   /___/   /   /___/       MP—Parallel Edition

 Statistics and Data Science       Copyright 1985-2023 StataCorp LLC
                                   StataCorp
                                   4905 Lakeway Drive
                                   College Station, Texas 77845 USA
                                   800-STATA-PC        https://www.stata.com
                                   979-696-4600        stata@stata.com

Stata license: 5-user 8-core network perpetual
Serial number: 501806372583
  Licensed to: Econ Department
               Cornell University, Ithaca, NY

Notes:
      1. Stata is running in batch mode.
      2. Unicode is supported; see help unicode_advice.
      3. More than 2 billion observations are allowed; see help obs_advice.
      4. Maximum number of variables is set to 5,000 but can be increased;
          see help set_maxvar.

. do master_LOOP6.do /logs/slurm_LOOP6.log 

. // Poaching Project
. // Created by: Fabiano Dal-Ri
. // (fd237@cornell.edu; dalri.fabiano@gmail.com)
. // Date created: April 2024
. 
. // Purpose: Master file for the "Poaching" project
. 
. *--------------------------*
. * SET UP
. *--------------------------*
. 
.         // working directory
.         cd "/home/ecco_rais/data/interwrk/daniela_group"
/home/ecco_rais/data/interwrk/daniela_group

.         
.         // clearing session
.         clear all

.         macro drop _all

. 
.         // default color scheme
.         set scheme s1color

.         
.         // globals -- input files
.         
.         global RAIS_Clean       "RAIS/output/data/identified/RAIS_Clean"

.         global AKM              "akm/output/data"

.         global JointMovements   "displacement/output/data/JointMovements"

.         global Owners           "fabiano/jmp/output/data/Owners"

.         global Firms_Panel      "fabiano/jmp/output/data/Firms_Panel"   

.         
.         // globals -- paths in this folder
.         
.         global input            "poaching/input"

.         global prepare          "poaching/programs/prepare"

.         global analysis         "poaching/programs/analysis"

.         global auxiliary        "poaching/programs/auxiliary"

.         global data             "poaching/output/data"

.         global results          "poaching/output/results"

.         global temp             "poaching/temp"

.         
.         // globals -- analysis
.         
.         global evt_vars evt_l9 evt_l8 evt_l7 evt_l6 evt_l5 evt_l4 evt_zero ev
> t_l2 evt_l1 ///
>               evt_f0 evt_f1 evt_f2 evt_f3 evt_f4 evt_f5 evt_f6 evt_f7 evt_f8 
> evt_f9 evt_f10 evt_f11 evt_f12     

.         
. *-----------------------------------------*
. * POPULATING INPUT FOLDER
. *-----------------------------------------*
. 
.         // "auxiliary" folder:
.         // -- ipca_brazil.dta: taken from other projects; no raw files availa
> ble anymore
.         // -- minwage_brazil.dta: taken from other projects; no raw files ava
> ilable anymore
.         // -- georegions.dta: taken from Fabiano's JMP
.         
. *-----------------------------------------*
. * PREPARE
. *-----------------------------------------*
. 
. // PART I: organizing RAIS data 
. 
.         // create a monthly RAIS panel
.         *do "${prepare}/rais_m"
.         
. // PART II: constructing auxiliary data sets
. 
.         // calculate average number of employees
.         *do "${prepare}/plantsize_m"
.         
.         // calculate wage growth variables at the plant-level
.         *do "${prepare}/wagegrowth_m"
.         
.         // calculate industry growth (employment)
.         *do "${prepare}/industrygrowth_m" // IN PROGRESS
.         
.         // calculate positive employment dummy variable
.         *do "${prepare}/posemp_m"
.                         
.         // identify joing movements
.         *do "${prepare}/jointmvt"
. 
. // PART III: constructing intermediate data sets
. 
.         // identifying poaching events
.         *do "${prepare}/202503_evt_m"
.                 
.                 // identifying the main poached individual
.                 *do "${prepare}/202503_mainpc"
.                 
.                 // identifying event types
.                 *do "${prepare}/202503_evttype"
.         
.         // constructing worker-level panel with coworkers of the poached indi
> viduals
.         *do "${prepare}/202503_cowork_panel_m"
.         
.         // constructing event-level panel with poaching plants (destination p
> lants)
.         *do "${prepare}/202503_evt_panel_m"
.         
.         // constructing worker-level data set with poaching firms in t=0
.         *do "${prepare}/202503_dest_panel_m"
.         
.         // event-level data set
.         *do "${prepare}/202503_poach_ind"
.         *do "${prepare}/202503_poach_ind_LOOP1"
.         *do "${prepare}/202503_poach_ind_LOOP2"
.         *do "${prepare}/202503_poach_ind_LOOP3"
.         *do "${prepare}/202503_poach_ind_LOOP4"
.         *do "${prepare}/202503_poach_ind_LOOP5"
.         do "${prepare}/202503_poach_ind_LOOP6"

. // Poaching Project
. // Created by: Fabiano Dal-Ri
. // (fd237@cornell.edu; dalri.fabiano@gmail.com)
. // Date created: August 2024
. 
. // Purpose: Create data set with poached individuals only
. 
. *--------------------------*
. * BUILD
. *--------------------------*
. 
. // variables from cowork_panel_m
. 
.         // this panel will be constructed separately for each cohort
.         foreach ym of numlist 661/671 { 
  2. 
.         use "${data}/202503_cowork_panel_m/202503_o_cw_`ym'", clear
  3.         
.         // creating alternative raided workers variable -- MOVE THIS TO COWOR
> K_PANEL_M_SPV, EVENTUALLY
.         // reassigning poached individuals who are not the main one as raided
>  individuals
.         
.                 gen raidpc = (raid == 1 | (ym_rel == 0 & pc_individual == 1 &
>  main_individual == 0))
  4.                 
.                 gen raidpc_individual = (raid_individual == 1 | (pc_individua
> l == 1 & main_individual == 0))
  5.                         
.         // organizing variables we want to keep
.         
.                 // cnae_o, cnae_d
.                 
.                 tostring cnae20_class, gen(cnae20_class_str) format(%05.0f)
  6.                 gen cnae20_2d = substr(cnae20_class_str, 1, 2)
  7.                 destring cnae20_2d, force replace
  8.                 
.                 gen cnae_o_temp = cnae20_2d if ym_rel == -12
  9.                 egen cnae_o = max(cnae_o_temp), by(eventid)
 10.                 
.                 gen cnae_d_temp = cnae20_2d if ym_rel == 0
 11.                 egen cnae_d = max(cnae_d_temp), by(eventid)
 12.                 
.                 drop cnae20_class_str cnae20_2d cnae_o_temp cnae_d_temp
 13.                 
.                 // o_avg_worker_naive_fe
.                 
.                 gen o_avg_worker_naive_fe_temp = worker_naive_fe if ym_rel ==
>  -12
 14.                 egen o_avg_worker_naive_fe = mean(o_avg_worker_naive_fe_te
> mp), by(eventid)
 15.                 
.                 drop o_avg_worker_naive_fe_temp
 16.                 
.                 // o_avg_worker_akm_fe
.                 
.                 gen o_avg_worker_akm_fe_temp = worker_akm_fe if ym_rel == -12
 17.                 egen o_avg_worker_akm_fe = mean(o_avg_worker_akm_fe_temp),
>  by(eventid)
 18.                 
.                 drop o_avg_worker_akm_fe_temp
 19.                 
.                 // o_size
.         
.                 gen o_size_temp = 1 if ym_rel == -12
 20.                 egen o_size = sum(o_size_temp), by(eventid)
 21.                 
.                 drop o_size_temp
 22.                 
.                 // pc_age
.                 
.                 gen pc_age_temp = age if ym_rel == -12 & pc_individual == 1
 23.                 egen pc_age = mean(pc_age_temp), by(eventid)
 24.                 
.                 drop pc_age_temp
 25.                 
.                         // pc_age
.                 
.                         gen main_age_temp = age if ym_rel == -12 & main_indiv
> idual == 1
 26.                         egen main_age = mean(main_age_temp), by(eventid)
 27.                 
.                         drop main_age_temp
 28.                 
.                 // pc_exp
.                 
.                 gen pc_exp_temp = age - educ_years - 6 if ym_rel == -12 & pc_
> individual == 1
 29.                 
.                         // note: in some cases, this is negative or zero
.                         // issue: young people with too many education years
.                         // in these cases, we assign pc_exp = 1 (they were em
> ployed, after all)
.                         replace pc_exp_temp = 1 if pc_exp <= 0
 30.                         
.                 egen pc_exp = mean(pc_exp_temp), by(eventid)
 31.                 
.                 drop pc_exp_temp
 32.                 
.                         // main_exp
.                 
.                         gen main_exp_temp = age - educ_years - 6 if ym_rel ==
>  -12 & main_individual == 1
 33.                 
.                                 // note: in some cases, this is negative or z
> ero
.                                 // issue: young people with too many educatio
> n years
.                                 // in these cases, we assign main_exp = 1 (th
> ey were employed, after all)
.                                 replace main_exp_temp = 1 if main_exp <= 0
 34.                                 
.                         egen main_exp = mean(main_exp_temp), by(eventid)
 35.                         
.                         drop main_exp_temp
 36.                 
.                 // pc_worker_naive_fe
.                 
.                 gen pc_worker_naive_fe_temp = worker_naive_fe if ym_rel == -1
> 2 & pc_individual == 1
 37.                 egen pc_worker_naive_fe = mean(pc_worker_naive_fe_temp), b
> y(eventid)
 38.                 
.                 drop pc_worker_naive_fe_temp
 39.                 
.                         // main_worker_naive_fe
.                 
.                         gen main_worker_naive_fe_temp = worker_naive_fe if ym
> _rel == -12 & main_individual == 1
 40.                         egen main_worker_naive_fe = mean(main_worker_naive
> _fe_temp), by(eventid)
 41.                 
.                         drop main_worker_naive_fe_temp
 42.                         
.                 // pc_worker_akm_fe
.                 
.                 gen pc_worker_akm_fe_temp = worker_akm_fe if ym_rel == -12 & 
> pc_individual == 1
 43.                 egen pc_worker_akm_fe = mean(pc_worker_akm_fe_temp), by(ev
> entid)
 44.                 
.                 drop pc_worker_akm_fe_temp
 45.                 
.                         // main_worker_akm_fe
.                 
.                         gen main_worker_akm_fe_temp = worker_akm_fe if ym_rel
>  == -12 & main_individual == 1
 46.                         egen main_worker_akm_fe = mean(main_worker_akm_fe_
> temp), by(eventid)
 47.                 
.                         drop main_worker_akm_fe_temp    
 48.         
.                 // pc_wage_d
.                 
.                 gen pc_wage_d_temp = wage_real_ln if ym_rel == 0 & pc_individ
> ual == 1
 49.                 egen pc_wage_d = mean(pc_wage_d_temp), by(eventid)
 50.                 
.                 drop pc_wage_d_temp
 51.                 
.                         // main_wage_d
.                 
.                         gen main_wage_d_temp = wage_real_ln if ym_rel == 0 & 
> main_individual == 1
 52.                         egen main_wage_d = mean(main_wage_d_temp), by(even
> tid)
 53.                         
.                         drop main_wage_d_temp
 54.                 
.                 // pc_wage_d_lvl
.                 
.                 gen pc_wage_d_lvl_temp = wage_real if ym_rel == 0 & pc_indivi
> dual == 1
 55.                 egen pc_wage_d_lvl = mean(pc_wage_d_lvl_temp), by(eventid)
 56.                 
.                 drop pc_wage_d_lvl_temp
 57.                 
.                         // main_wage_d_lvl
.                 
.                         gen main_wage_d_lvl_temp = wage_real if ym_rel == 0 &
>  main_individual == 1
 58.                         egen main_wage_d_lvl = mean(main_wage_d_lvl_temp),
>  by(eventid)
 59.                         
.                         drop main_wage_d_lvl_temp
 60.                         
.                 // pc_wage_o_l1
.                 
.                 gen pc_wage_o_l1_temp = wage_real_ln if ym_rel == -1 & pc_ind
> ividual == 1
 61.                 egen pc_wage_o_l1 = mean(pc_wage_o_l1_temp), by(eventid)
 62.                 
.                 drop pc_wage_o_l1_temp
 63.                 
.                         // pc_wage_o_l1
.                 
.                         gen main_wage_o_l1_temp = wage_real_ln if ym_rel == -
> 1 & main_individual == 1
 64.                         egen main_wage_o_l1 = mean(main_wage_o_l1_temp), b
> y(eventid)
 65.                         
.                         drop main_wage_o_l1_temp
 66.                         
.                 // pc_wage_o_l1_lvl
.                 
.                 gen pc_wage_o_l1_lvl_temp = wage_real if ym_rel == -1 & pc_in
> dividual == 1
 67.                 egen pc_wage_o_l1_lvl = mean(pc_wage_o_l1_lvl_temp), by(ev
> entid)
 68.                 
.                 drop pc_wage_o_l1_lvl_temp
 69.                 
.                         // main_wage_o_l1_lvl
.                 
.                         gen main_wage_o_l1_lvl_temp = wage_real if ym_rel == 
> -1 & main_individual == 1
 70.                         egen main_wage_o_l1_lvl = mean(main_wage_o_l1_lvl_
> temp), by(eventid)
 71.                         
.                         drop main_wage_o_l1_lvl_temp
 72.                         
.                 // rd_coworker_naive_fe
.                 
.                 gen rd_coworker_naive_fe_temp = worker_naive_fe if ym_rel == 
> -12 & raid_individual == 1
 73.                 egen rd_coworker_naive_fe = mean(rd_coworker_naive_fe_temp
> ), by(eventid)
 74.                 
.                 drop rd_coworker_naive_fe_temp
 75.                 
.                         // rdpc_coworker_naive_fe
.                 
.                         gen rdpc_coworker_naive_fe_temp = worker_naive_fe if 
> ym_rel == -12 & raidpc_individual == 1
 76.                         egen rdpc_coworker_naive_fe = mean(rdpc_coworker_n
> aive_fe_temp), by(eventid)
 77.                         
.                         drop rdpc_coworker_naive_fe_temp
 78. 
.                 // rd_coworker_akm_fe
.                 
.                 gen rd_coworker_akm_fe_temp = worker_akm_fe if ym_rel == -12 
> & raid_individual == 1
 79.                 egen rd_coworker_akm_fe = mean(rd_coworker_akm_fe_temp), b
> y(eventid)
 80.                 
.                 drop rd_coworker_akm_fe_temp
 81.                 
.                         // rdpc_coworker_akm_fe
.                 
.                         gen rdpc_coworker_akm_fe_temp = worker_akm_fe if ym_r
> el == -12 & raidpc_individual == 1
 82.                         egen rdpc_coworker_akm_fe = mean(rdpc_coworker_akm
> _fe_temp), by(eventid)
 83.                         
.                         drop rdpc_coworker_akm_fe_temp  
 84.                         
.                 // rd_coworker_n
.                 
.                 gen rd_coworker_n_temp = 1 if ym_rel == -12 & raid_individual
>  == 1
 85.                 egen rd_coworker_n = sum(rd_coworker_n_temp), by(eventid)
 86.                 
.                 drop rd_coworker_n_temp
 87.                 
.                         // rdpc_coworker_n
.                 
.                         gen rdpc_coworker_n_temp = 1 if ym_rel == -12 & raidp
> c_individual == 1
 88.                         egen rdpc_coworker_n = sum(rdpc_coworker_n_temp), 
> by(eventid)
 89.                 
.                         drop rdpc_coworker_n_temp
 90.                 
.                 // rd_coworker_wage_o_lvl
.                 
.                 gen rd_coworker_wage_o_lvl_temp = wage_real if ym_rel == -12 
> & raid_individual == 1
 91.                 egen rd_coworker_wage_o_lvl = mean(rd_coworker_wage_o_lvl_
> temp), by(eventid)
 92.                 
.                 drop rd_coworker_wage_o_lvl_temp
 93.                 
.                         // rdpc_coworker_wage_o_lvl
.                         
.                         gen rdpc_coworker_wage_o_lvl_temp = wage_real if ym_r
> el == -12 & raidpc_individual == 1
 94.                         egen rdpc_coworker_wage_o_lvl = mean(rdpc_coworker
> _wage_o_lvl_temp), by(eventid)
 95.                         
.                         drop rdpc_coworker_wage_o_lvl_temp
 96.                 
.                 // rd_coworker_wage_d_lvl
.                 
.                 gen rd_coworker_wage_d_lvl_temp = wage_real if raid == 1 & ra
> id_individual == 1
 97.                 egen rd_coworker_wage_d_lvl = mean(rd_coworker_wage_d_lvl_
> temp), by(eventid)
 98.                 
.                 drop rd_coworker_wage_d_lvl_temp
 99.                 
.                         // rdpc_coworker_wage_d_lvl
.                 
.                         gen rdpc_coworker_wage_d_lvl_temp = wage_real if raid
> pc == 1 & raidpc_individual == 1
100.                         egen rdpc_coworker_wage_d_lvl = mean(rdpc_coworker
> _wage_d_lvl_temp), by(eventid)
101.                         
.                         drop rdpc_coworker_wage_d_lvl_temp
102.                         
.         // keeping the variables we need
.         keep eventid cnae_d cnae_o o_avg_worker_naive_fe o_avg_worker_akm_fe 
> o_size pc_age main_age pc_exp main_exp ///
>                 pc_worker_naive_fe pc_worker_akm_fe main_worker_naive_fe main
> _worker_akm_fe ///
>                 pc_wage_d main_wage_d pc_wage_d_lvl main_wage_d_lvl pc_wage_o
> _l1 ///
>                 main_wage_o_l1 pc_wage_o_l1_lvl main_wage_o_l1_lvl rd_coworke
> r_naive_fe rd_coworker_akm_fe ///
>                 rdpc_coworker_naive_fe rdpc_coworker_akm_fe ///
>                 rd_coworker_n rdpc_coworker_n rd_coworker_wage_d_lvl rdpc_cow
> orker_wage_d_lvl ///
>                 rd_coworker_wage_o_lvl rdpc_coworker_wage_o_lvl
103.         
.         // keeping one observation per event
.         egen unique = tag(eventid)
104.         keep if unique == 1
105.         drop unique
106.         
.         // save temporary file
.         save "${temp}/from_cowork_panel_m_`ym'", replace
107.         
.         }
cnae20_class_str generated as str5
cnae20_2d: all characters numeric; replaced as byte
(11883348 missing values generated)
(59,998,992 missing values generated)
(60,518,948 missing values generated)
(61,227,172 missing values generated)
(600 missing values generated)
(60,977,604 missing values generated)
(600 missing values generated)
(59,998,992 missing values generated)
(62,493,486 missing values generated)
(62,494,289 missing values generated)
(62,493,486 missing values generated)
(98 real changes made)
(62,494,289 missing values generated)
(95 real changes made)
(62,496,314 missing values generated)
(31,546,875 missing values generated)
(62,496,777 missing values generated)
(32,551,000 missing values generated)
(62,495,753 missing values generated)
(25,762,025 missing values generated)
(62,496,309 missing values generated)
(26,424,825 missing values generated)
(62,493,486 missing values generated)
(62,494,289 missing values generated)
(62,493,486 missing values generated)
(62,494,289 missing values generated)
(62,493,486 missing values generated)
(62,494,289 missing values generated)
(62,493,486 missing values generated)
(62,494,289 missing values generated)
(62,492,777 missing values generated)
(35,503,650 missing values generated)
(62,492,314 missing values generated)
(35,166,250 missing values generated)
(62,491,452 missing values generated)
(33,868,450 missing values generated)
(62,490,896 missing values generated)
(33,568,850 missing values generated)
(62,486,292 missing values generated)
(62,485,489 missing values generated)
(62,486,292 missing values generated)
(28,778,425 missing values generated)
(62,485,489 missing values generated)
(28,505,000 missing values generated)
(62,486,292 missing values generated)
(28,778,425 missing values generated)
(62,485,489 missing values generated)
(28,505,000 missing values generated)
(62,494,289 observations deleted)
file poaching/temp/from_cowork_panel_m_661.dta saved
cnae20_class_str generated as str5
cnae20_2d: all characters numeric; replaced as byte
(13317321 missing values generated)
(66,602,256 missing values generated)
(67,182,893 missing values generated)
(67,958,421 missing values generated)
(67,680,844 missing values generated)
(66,602,256 missing values generated)
(69,370,777 missing values generated)
(69,371,657 missing values generated)
(69,370,777 missing values generated)
(107 real changes made)
(69,371,657 missing values generated)
(99 real changes made)
(69,374,116 missing values generated)
(34,219,000 missing values generated)
(69,374,602 missing values generated)
(35,170,350 missing values generated)
(69,373,444 missing values generated)
(27,112,600 missing values generated)
(69,374,020 missing values generated)
(27,996,475 missing values generated)
(69,370,777 missing values generated)
(69,371,657 missing values generated)
(69,370,777 missing values generated)
(69,371,657 missing values generated)
(69,370,777 missing values generated)
(69,371,657 missing values generated)
(69,370,777 missing values generated)
(69,371,657 missing values generated)
(69,369,920 missing values generated)
(39,527,825 missing values generated)
(69,369,434 missing values generated)
(39,075,650 missing values generated)
(69,368,343 missing values generated)
(37,152,100 missing values generated)
(69,367,767 missing values generated)
(36,795,775 missing values generated)
(69,362,098 missing values generated)
(69,361,218 missing values generated)
(69,362,098 missing values generated)
(32,006,650 missing values generated)
(69,361,218 missing values generated)
(31,622,975 missing values generated)
(69,362,098 missing values generated)
(32,006,650 missing values generated)
(69,361,218 missing values generated)
(31,622,975 missing values generated)
(69,371,657 observations deleted)
file poaching/temp/from_cowork_panel_m_662.dta saved
cnae20_class_str generated as str5
cnae20_2d: all characters numeric; replaced as byte
(12536002 missing values generated)
(63,264,576 missing values generated)
(63,807,548 missing values generated)
(64,558,330 missing values generated)
(1,150 missing values generated)
(64,298,321 missing values generated)
(63,264,576 missing values generated)
(65,894,852 missing values generated)
(65,895,607 missing values generated)
(65,894,852 missing values generated)
(120 real changes made)
(65,895,607 missing values generated)
(115 real changes made)
(65,897,810 missing values generated)
(31,850,175 missing values generated)
(65,898,213 missing values generated)
(32,371,600 missing values generated)
(65,897,255 missing values generated)
(26,563,150 missing values generated)
(65,897,737 missing values generated)
(26,991,925 missing values generated)
(65,894,852 missing values generated)
(65,895,607 missing values generated)
(65,894,852 missing values generated)
(65,895,607 missing values generated)
(65,894,852 missing values generated)
(65,895,607 missing values generated)
(65,894,852 missing values generated)
(65,895,607 missing values generated)
(65,894,793 missing values generated)
(39,525,500 missing values generated)
(65,894,390 missing values generated)
(39,130,025 missing values generated)
(65,893,416 missing values generated)
(37,572,925 missing values generated)
(65,892,934 missing values generated)
(37,155,625 missing values generated)
(65,887,666 missing values generated)
(65,886,911 missing values generated)
(65,887,666 missing values generated)
(32,152,475 missing values generated)
(65,886,911 missing values generated)
(31,610,450 missing values generated)
(65,887,666 missing values generated)
(32,152,475 missing values generated)
(65,886,911 missing values generated)
(31,610,450 missing values generated)
(65,895,607 observations deleted)
file poaching/temp/from_cowork_panel_m_663.dta saved
cnae20_class_str generated as str5
cnae20_2d: all characters numeric; replaced as byte
(13038309 missing values generated)
(63,207,072 missing values generated)
(63,777,856 missing values generated)
(64,512,223 missing values generated)
(1,475 missing values generated)
(64,249,197 missing values generated)
(1,475 missing values generated)
(63,207,072 missing values generated)
(65,834,626 missing values generated)
(65,835,734 missing values generated)
(65,834,626 missing values generated)
(104 real changes made)
(65,835,734 missing values generated)
(100 real changes made)
(65,837,672 missing values generated)
(31,156,725 missing values generated)
(65,838,252 missing values generated)
(32,340,850 missing values generated)
(65,837,080 missing values generated)
(24,408,725 missing values generated)
(65,837,778 missing values generated)
(25,557,700 missing values generated)
(65,834,626 missing values generated)
(65,835,734 missing values generated)
(65,834,626 missing values generated)
(65,835,734 missing values generated)
(65,834,626 missing values generated)
(65,835,734 missing values generated)
(65,834,626 missing values generated)
(65,835,734 missing values generated)
(65,834,342 missing values generated)
(34,697,500 missing values generated)
(65,833,762 missing values generated)
(34,081,650 missing values generated)
(65,832,802 missing values generated)
(32,996,875 missing values generated)
(65,832,104 missing values generated)
(32,397,575 missing values generated)
(65,826,842 missing values generated)
(65,825,734 missing values generated)
(65,826,842 missing values generated)
(28,283,700 missing values generated)
(65,825,734 missing values generated)
(27,661,700 missing values generated)
(65,826,842 missing values generated)
(28,283,700 missing values generated)
(65,825,734 missing values generated)
(27,661,700 missing values generated)
(65,835,734 observations deleted)
file poaching/temp/from_cowork_panel_m_664.dta saved
cnae20_class_str generated as str5
cnae20_2d: all characters numeric; replaced as byte
(12690426 missing values generated)
(61,704,576 missing values generated)
(62,261,757 missing values generated)
(62,956,623 missing values generated)
(62,699,835 missing values generated)
(61,704,576 missing values generated)
(64,269,555 missing values generated)
(64,270,911 missing values generated)
(64,269,555 missing values generated)
(102 real changes made)
(64,270,911 missing values generated)
(95 real changes made)
(64,272,534 missing values generated)
(27,825,975 missing values generated)
(64,273,222 missing values generated)
(29,565,550 missing values generated)
(64,271,899 missing values generated)
(22,156,425 missing values generated)
(64,272,759 missing values generated)
(23,685,150 missing values generated)
(64,269,555 missing values generated)
(64,270,911 missing values generated)
(64,269,555 missing values generated)
(64,270,911 missing values generated)
(64,269,555 missing values generated)
(64,270,911 missing values generated)
(64,269,555 missing values generated)
(64,270,911 missing values generated)
(64,268,477 missing values generated)
(36,005,825 missing values generated)
(64,267,789 missing values generated)
(35,356,700 missing values generated)
(64,266,893 missing values generated)
(33,385,250 missing values generated)
(64,266,033 missing values generated)
(32,761,050 missing values generated)
(64,260,943 missing values generated)
(64,259,587 missing values generated)
(64,260,943 missing values generated)
(27,854,550 missing values generated)
(64,259,587 missing values generated)
(27,272,450 missing values generated)
(64,260,943 missing values generated)
(27,854,550 missing values generated)
(64,259,587 missing values generated)
(27,272,450 missing values generated)
(64,270,911 observations deleted)
file poaching/temp/from_cowork_panel_m_665.dta saved
cnae20_class_str generated as str5
cnae20_2d: all characters numeric; replaced as byte
(12002635 missing values generated)
(57,893,208 missing values generated)
(58,425,782 missing values generated)
(59,081,555 missing values generated)
(1,575 missing values generated)
(58,842,992 missing values generated)
(475 missing values generated)
(57,893,208 missing values generated)
(60,300,014 missing values generated)
(60,300,967 missing values generated)
(60,300,014 missing values generated)
(128 real changes made)
(60,300,967 missing values generated)
(120 real changes made)
(60,302,739 missing values generated)
(26,884,375 missing values generated)
(60,303,250 missing values generated)
(28,450,350 missing values generated)
(60,302,213 missing values generated)
(20,477,825 missing values generated)
(60,302,815 missing values generated)
(21,862,575 missing values generated)
(60,300,014 missing values generated)
(60,300,967 missing values generated)
(60,300,014 missing values generated)
(60,300,967 missing values generated)
(60,300,014 missing values generated)
(60,300,967 missing values generated)
(60,300,014 missing values generated)
(60,300,967 missing values generated)
(60,298,471 missing values generated)
(34,310,275 missing values generated)
(60,297,960 missing values generated)
(33,536,150 missing values generated)
(60,296,890 missing values generated)
(32,069,425 missing values generated)
(60,296,288 missing values generated)
(31,332,300 missing values generated)
(60,290,876 missing values generated)
(60,289,923 missing values generated)
(60,290,876 missing values generated)
(26,743,000 missing values generated)
(60,289,923 missing values generated)
(26,064,350 missing values generated)
(60,290,876 missing values generated)
(26,743,000 missing values generated)
(60,289,923 missing values generated)
(26,064,350 missing values generated)
(60,300,967 observations deleted)
file poaching/temp/from_cowork_panel_m_666.dta saved
cnae20_class_str generated as str5
cnae20_2d: all characters numeric; replaced as byte
(12543362 missing values generated)
(57,483,216 missing values generated)
(58,033,140 missing values generated)
(58,697,210 missing values generated)
(750 missing values generated)
(58,459,451 missing values generated)
(750 missing values generated)
(57,483,216 missing values generated)
(59,873,139 missing values generated)
(59,874,201 missing values generated)
(59,873,139 missing values generated)
(117 real changes made)
(59,874,201 missing values generated)
(113 real changes made)
(59,875,776 missing values generated)
(29,159,025 missing values generated)
(59,876,314 missing values generated)
(30,708,575 missing values generated)
(59,875,247 missing values generated)
(24,238,550 missing values generated)
(59,875,881 missing values generated)
(25,431,925 missing values generated)
(59,873,139 missing values generated)
(59,874,201 missing values generated)
(59,873,139 missing values generated)
(59,874,201 missing values generated)
(59,873,139 missing values generated)
(59,874,201 missing values generated)
(59,873,139 missing values generated)
(59,874,201 missing values generated)
(59,872,175 missing values generated)
(33,466,075 missing values generated)
(59,871,637 missing values generated)
(32,881,450 missing values generated)
(59,870,706 missing values generated)
(31,022,675 missing values generated)
(59,870,072 missing values generated)
(30,586,950 missing values generated)
(59,865,016 missing values generated)
(59,863,954 missing values generated)
(59,865,016 missing values generated)
(25,368,550 missing values generated)
(59,863,954 missing values generated)
(24,985,725 missing values generated)
(59,865,016 missing values generated)
(25,368,550 missing values generated)
(59,863,954 missing values generated)
(24,985,725 missing values generated)
(59,874,201 observations deleted)
file poaching/temp/from_cowork_panel_m_667.dta saved
cnae20_class_str generated as str5
cnae20_2d: all characters numeric; replaced as byte
(12344383 missing values generated)
(56,494,296 missing values generated)
(57,035,677 missing values generated)
(57,683,080 missing values generated)
(2,150 missing values generated)
(57,447,304 missing values generated)
(56,494,296 missing values generated)
(58,842,737 missing values generated)
(58,844,000 missing values generated)
(58,842,737 missing values generated)
(110 real changes made)
(58,844,000 missing values generated)
(102 real changes made)
(58,845,497 missing values generated)
(28,454,875 missing values generated)
(58,846,178 missing values generated)
(29,810,050 missing values generated)
(58,844,949 missing values generated)
(22,228,975 missing values generated)
(58,845,764 missing values generated)
(23,783,375 missing values generated)
(58,842,737 missing values generated)
(58,844,000 missing values generated)
(58,842,737 missing values generated)
(58,844,000 missing values generated)
(58,842,737 missing values generated)
(58,844,000 missing values generated)
(58,842,737 missing values generated)
(58,844,000 missing values generated)
(58,841,546 missing values generated)
(32,089,600 missing values generated)
(58,840,865 missing values generated)
(31,702,050 missing values generated)
(58,840,030 missing values generated)
(29,998,825 missing values generated)
(58,839,215 missing values generated)
(29,380,200 missing values generated)
(58,834,514 missing values generated)
(58,833,251 missing values generated)
(58,834,514 missing values generated)
(25,505,275 missing values generated)
(58,833,251 missing values generated)
(24,893,175 missing values generated)
(58,834,514 missing values generated)
(25,505,275 missing values generated)
(58,833,251 missing values generated)
(24,893,175 missing values generated)
(58,844,000 observations deleted)
file poaching/temp/from_cowork_panel_m_668.dta saved
cnae20_class_str generated as str5
cnae20_2d: all characters numeric; replaced as byte
(11856280 missing values generated)
(54,730,632 missing values generated)
(55,261,257 missing values generated)
(55,893,883 missing values generated)
(1,300 missing values generated)
(55,669,171 missing values generated)
(1,300 missing values generated)
(54,730,632 missing values generated)
(57,005,581 missing values generated)
(57,007,082 missing values generated)
(57,005,581 missing values generated)
(123 real changes made)
(57,007,082 missing values generated)
(113 real changes made)
(57,008,383 missing values generated)
(27,466,350 missing values generated)
(57,009,106 missing values generated)
(28,991,750 missing values generated)
(57,007,811 missing values generated)
(22,162,425 missing values generated)
(57,008,696 missing values generated)
(23,550,375 missing values generated)
(57,005,581 missing values generated)
(57,007,082 missing values generated)
(57,005,581 missing values generated)
(57,007,082 missing values generated)
(57,005,581 missing values generated)
(57,007,082 missing values generated)
(57,005,581 missing values generated)
(57,007,082 missing values generated)
(57,004,767 missing values generated)
(31,553,325 missing values generated)
(57,004,044 missing values generated)
(30,836,000 missing values generated)
(57,003,365 missing values generated)
(30,102,350 missing values generated)
(57,002,480 missing values generated)
(29,423,075 missing values generated)
(56,997,866 missing values generated)
(56,996,365 missing values generated)
(56,997,866 missing values generated)
(24,263,100 missing values generated)
(56,996,365 missing values generated)
(23,770,825 missing values generated)
(56,997,866 missing values generated)
(24,263,100 missing values generated)
(56,996,365 missing values generated)
(23,770,825 missing values generated)
(57,007,082 observations deleted)
file poaching/temp/from_cowork_panel_m_669.dta saved
cnae20_class_str generated as str5
cnae20_2d: all characters numeric; replaced as byte
(11235346 missing values generated)
(50,585,928 missing values generated)
(51,084,437 missing values generated)
(51,659,256 missing values generated)
(600 missing values generated)
(51,452,878 missing values generated)
(50,585,928 missing values generated)
(52,688,189 missing values generated)
(52,690,051 missing values generated)
(52,688,189 missing values generated)
(116 real changes made)
(52,690,051 missing values generated)
(99 real changes made)
(52,690,836 missing values generated)
(25,352,800 missing values generated)
(52,691,920 missing values generated)
(27,386,850 missing values generated)
(52,690,276 missing values generated)
(19,419,975 missing values generated)
(52,691,537 missing values generated)
(21,041,125 missing values generated)
(52,688,189 missing values generated)
(52,690,051 missing values generated)
(52,688,189 missing values generated)
(52,690,051 missing values generated)
(52,688,189 missing values generated)
(52,690,051 missing values generated)
(52,688,189 missing values generated)
(52,690,051 missing values generated)
(52,687,091 missing values generated)
(28,040,150 missing values generated)
(52,686,007 missing values generated)
(27,568,625 missing values generated)
(52,685,710 missing values generated)
(26,190,625 missing values generated)
(52,684,449 missing values generated)
(25,756,800 missing values generated)
(52,680,604 missing values generated)
(52,678,742 missing values generated)
(52,680,604 missing values generated)
(21,903,075 missing values generated)
(52,678,742 missing values generated)
(21,650,925 missing values generated)
(52,680,604 missing values generated)
(21,903,075 missing values generated)
(52,678,742 missing values generated)
(21,650,925 missing values generated)
(52,690,051 observations deleted)
file poaching/temp/from_cowork_panel_m_670.dta saved
cnae20_class_str generated as str5
cnae20_2d: all characters numeric; replaced as byte
(8317279 missing values generated)
(40,017,168 missing values generated)
(40,384,791 missing values generated)
(40,849,188 missing values generated)
(40,686,959 missing values generated)
(40,017,168 missing values generated)
(41,681,071 missing values generated)
(41,681,841 missing values generated)
(41,681,071 missing values generated)
(85 real changes made)
(41,681,841 missing values generated)
(80 real changes made)
(41,682,871 missing values generated)
(20,609,675 missing values generated)
(41,683,260 missing values generated)
(21,540,150 missing values generated)
(41,682,522 missing values generated)
(16,374,025 missing values generated)
(41,682,983 missing values generated)
(17,003,900 missing values generated)
(41,681,071 missing values generated)
(41,681,841 missing values generated)
(41,681,071 missing values generated)
(41,681,841 missing values generated)
(41,681,071 missing values generated)
(41,681,841 missing values generated)
(41,681,071 missing values generated)
(41,681,841 missing values generated)
(41,679,917 missing values generated)
(22,362,600 missing values generated)
(41,679,528 missing values generated)
(21,820,725 missing values generated)
(41,678,865 missing values generated)
(21,317,800 missing values generated)
(41,678,404 missing values generated)
(20,775,175 missing values generated)
(41,674,982 missing values generated)
(41,674,212 missing values generated)
(41,674,982 missing values generated)
(17,737,625 missing values generated)
(41,674,212 missing values generated)
(17,240,500 missing values generated)
(41,674,982 missing values generated)
(17,737,625 missing values generated)
(41,674,212 missing values generated)
(17,240,500 missing values generated)
(41,681,841 observations deleted)
file poaching/temp/from_cowork_panel_m_671.dta saved

.         
.         /*
>         
>         // appending monthly files
> 
>         clear 
>                 
>         foreach ym of numlist 601/611 613/623 625/635 637/647 649/659 661/671
>  673/683 { 
>                 
>                 append using "${temp}/from_cowork_panel_m_`ym'"
>         
>         }
>         
>         save "${temp}/from_cowork_panel_m", replace
>         
>         */
. 
. // variables from dest_panel_m
.         
.         // this panel will be constructed separately for each cohort
.         foreach ym of numlist 661/671 { 
  2. 
.         use "${data}/202503_dest_panel_m/202503_dest_panel_m_`ym'", clear
  3.         
.         sort eventid ym cpf
  4.         gen pc_ym = `ym'
  5.         gen ym_rel = ym - pc_ym
  6.         
.         // organizing variables we want to keep
.         
.                 // d_avg_worker_naive_fe
.                 
.                 gen d_avg_worker_naive_fe_temp = worker_naive_fe if ym_rel ==
>  0
  7.                 egen d_avg_worker_naive_fe = mean(d_avg_worker_naive_fe_te
> mp), by(eventid)
  8.                 
.                 drop d_avg_worker_naive_fe_temp
  9.                 
.                 // d_avg_worker_akm_fe
.                 
.                 gen d_avg_worker_akm_fe_temp = worker_akm_fe if ym_rel == 0
 10.                 egen d_avg_worker_akm_fe = mean(d_avg_worker_akm_fe_temp),
>  by(eventid)
 11.                 
.                 drop d_avg_worker_akm_fe_temp
 12.                 
.                 // d_size
.                 
.                 gen d_size_temp = 1 if ym_rel == 0
 13.                 egen d_size = sum(d_size_temp), by(eventid)
 14.         
.                 drop d_size_temp
 15.                 
.         // keeping the variables we need
.         keep eventid d_avg_worker_naive_fe d_avg_worker_akm_fe d_size
 16.         
.         // keeping one observation per event
.         egen unique = tag(eventid)
 17.         keep if unique == 1
 18.         drop unique
 19.         
.         // save temporary file
.         save "${temp}/from_dest_panel_m_`ym'", replace
 20.                 
.         }
(63,428,126 missing values generated)
(791 missing values generated)
(63,175,106 missing values generated)
(62,164,600 missing values generated)
(64,816,512 observations deleted)
(file poaching/temp/from_dest_panel_m_661.dta not found)
file poaching/temp/from_dest_panel_m_661.dta saved
(69,908,858 missing values generated)
(570 missing values generated)
(69,628,513 missing values generated)
(68,502,148 missing values generated)
(71,431,006 observations deleted)
(file poaching/temp/from_dest_panel_m_662.dta not found)
file poaching/temp/from_dest_panel_m_662.dta saved
(66,055,678 missing values generated)
(65,792,499 missing values generated)
(64,746,377 missing values generated)
(67,508,530 observations deleted)
(file poaching/temp/from_dest_panel_m_663.dta not found)
file poaching/temp/from_dest_panel_m_663.dta saved
(63,884,712 missing values generated)
(639 missing values generated)
(63,628,614 missing values generated)
(639 missing values generated)
(62,614,033 missing values generated)
(65,280,237 observations deleted)
(file poaching/temp/from_dest_panel_m_664.dta not found)
file poaching/temp/from_dest_panel_m_664.dta saved
(61,276,796 missing values generated)
(471 missing values generated)
(61,035,509 missing values generated)
(60,073,236 missing values generated)
(62,622,658 observations deleted)
(file poaching/temp/from_dest_panel_m_665.dta not found)
file poaching/temp/from_dest_panel_m_665.dta saved
(58,021,461 missing values generated)
(892 missing values generated)
(57,793,175 missing values generated)
(760 missing values generated)
(56,871,892 missing values generated)
(59,282,082 observations deleted)
(file poaching/temp/from_dest_panel_m_666.dta not found)
file poaching/temp/from_dest_panel_m_666.dta saved
(57,387,759 missing values generated)
(57,159,137 missing values generated)
(56,230,467 missing values generated)
(58,619,695 observations deleted)
(file poaching/temp/from_dest_panel_m_667.dta not found)
file poaching/temp/from_dest_panel_m_667.dta saved
(54,356,767 missing values generated)
(549 missing values generated)
(54,143,262 missing values generated)
(53,288,883 missing values generated)
(55,543,883 observations deleted)
(file poaching/temp/from_dest_panel_m_668.dta not found)
file poaching/temp/from_dest_panel_m_668.dta saved
(54,812,910 missing values generated)
(667 missing values generated)
(54,596,477 missing values generated)
(53,722,036 missing values generated)
(55,994,703 observations deleted)
(file poaching/temp/from_dest_panel_m_669.dta not found)
file poaching/temp/from_dest_panel_m_669.dta saved
(47,572,113 missing values generated)
(47,386,147 missing values generated)
(46,632,298 missing values generated)
(48,604,913 observations deleted)
(file poaching/temp/from_dest_panel_m_670.dta not found)
file poaching/temp/from_dest_panel_m_670.dta saved
(39,184,675 missing values generated)
(39,032,210 missing values generated)
(38,423,758 missing values generated)
(40,043,109 observations deleted)
(file poaching/temp/from_dest_panel_m_671.dta not found)
file poaching/temp/from_dest_panel_m_671.dta saved

.         
.         // appending monthly files
.         
.         /*
>         
>         clear
>                 
>         foreach ym of numlist 601/611 613/623 625/635 637/647 649/659 661/671
>  673/683 { 
>                 
>                 append using "${temp}/from_dest_panel_m_`ym'"
>         
>         }
>         
>         save "${temp}/from_dest_panel_m", replace
>         
>         */
.                         
. // variables from evt_panel_m
. 
.         /* // ISSO AQUI JÁ FOI RODADO!!!!!!!!!!!
>         
>         use "${data}/202503_evt_panel_m", clear
>         
>         // organizing variables we want to keep
>         
>                 // d_growth -- NOTE::: LATER, LET'S USE THE PLANT SIZE DATA S
> ET
>                         
>                 gen d_wkr_l12_temp = d_wkr if ym_rel == -12
>                 egen d_wkr_l12 = max(d_wkr_l12_temp), by(eventid)
>                 drop d_wkr_l12_temp
>                         
>                 gen d_wkr_l1_temp = d_wkr if ym_rel == -1
>                 egen d_wkr_l1 = max(d_wkr_l1_temp), by(eventid)
>                 drop d_wkr_l1_temp
>                         
>                 gen d_growth = d_wkr_l1 / d_wkr_l12 - 1
>                 
>                 // d_hire_total
>                 
>                 gen d_hire_total_temp = d_hire if ym_rel >= 0
>                 egen d_hire_total = sum(d_hire_total_temp), by(eventid)
>                 
>                 drop d_hire_total_temp
>                 
>         // keeping the variables we need
>         keep eventid d_growth d_hire_total
>         
>         // keeping one observation per event
>         egen unique = tag(eventid)
>         keep if unique == 1
>         drop unique
>         
>         // save temporary file
>         save "${temp}/from_evt_panel_m", replace 
>         
>         */
.         
. // constructing the panel directly
. 
.         // LATER -- THIS SHOULD BE PRETTY STRAIGHTFORWARD WHEN THE ABOVE IS C
> OMPLETE
.         
.         /*
> 
>         foreach e in spv dir emp {
> 
>         use "${data}/evt_m_`e'", clear 
>         
>         // dropping unnecessary variable
>         drop pc_`e'
>         
>         // period restriction
>         keep if pc_ym >= ym(2010,1)
>         
>         // merging with the previous data sets
>         merge 1:1 event_id using "${temp}/from_cowork_panel_m_`e'", nogen
>         merge 1:1 event_id using "${temp}/from_dest_panel_m_`e'", nogen
>         merge 1:1 event_id using "${temp}/from_evt_panel_m_`e'", nogen
>         
>         // merging with firm FE --- UPDATE THIS USING THE NEW AKM EFFECTS!
>         
>                 // origin
>                         
>                 tostring o_plant, generate(plant_id) format(%014.0f)
>                 gen firm_id = substr(plant_id, 1, 8)
>                 destring firm_id, force replace
>                         
>                 merge m:1 firm_id using "${AKM}/AKM_2003_2008_Firm", keep(mas
> ter match) nogen
>                 rename fe_firm fe_firm_o
>                         
>                 drop firm_id plant_id
>                 
>                 // destination
>                 
>                 tostring d_plant, generate(plant_id) format(%014.0f)
>                 gen firm_id = substr(plant_id, 1, 8)
>                 destring firm_id, force replace
>                         
>                 merge m:1 firm_id using "${AKM}/AKM_2003_2008_Firm", keep(mas
> ter match) nogen
>                 rename fe_firm fe_firm_d
>                         
>                 drop firm_id plant_id
>                 
>         // creating additional variables
>         
>                 // d_size_ln
>                 gen d_size_ln = ln(d_size)
>                 
>                 // pc_exp_ln
>                 gen pc_exp_ln = ln(pc_exp)
>                 
>                 // rd_coworker_n_ln
>                 gen rd_coworker_n_ln = ln(rd_coworker_n)
>                 
>                 // ratio_cw_new_hire
>                 gen ratio_cw_new_hire = rd_coworker_n / d_hire
>                 
>         // labeling variables
>         
>         cap la var cnae_d                       "CNAE of destination firm"
>         cap la var cnae_o                       "CNAE of origin firm"
>         cap la var d_avg_fe_worker              "Avg. worker AKM FE at dest. 
> firm at -0" 
>         cap la var d_growth                     "Destination firm growth rate
>  between -12 and -1"            
>         cap la var d_hire                       "Number of hires at dest. fir
> m after 0" 
>         cap la var d_plant                      "Destination plant ID"
>         cap la var d_size                       "Size of destination firm"   
>    
>         cap la var d_size_ln                    "Ln of size of destination fi
> rm"  
>         cap la var event_id                     "Event ID"
>         cap la var fe_firm_d                    "Destination firm AKM FE"    
>         cap la var fe_firm_o                    "Origin firm AKM FE"     
>         cap la var o_avg_fe_worker              "Avg. worker AKM FE at origin
>  firm at -12"
>         cap la var o_plant                      "Origin plant ID"
>         cap la var o_size                       "Size of origin firm"       
>         cap la var pc_age                       "Age of poached individual"  
>      
>         cap la var pc_exp                       "Poached individual experienc
> e"       
>         cap la var pc_exp_ln                    "Ln of experience of poached 
> individual"   
>         cap la var pc_fe                        "AKM FE of poached individual
> "       
>         cap la var pc_wage_d                    "Ln wage of poached individua
> l at dest. firm"
>         cap la var pc_wage_d_lvl                "Wage of poached individual a
> t dest. firm (level)"
>         cap la var pc_wage_o_l1                 "Ln wage of poached individua
> l at origin firm in -1"  
>         cap la var pc_wage_o_l1_lvl             "Wage of poached individual a
> t origin firm in -1 (level)"
>         cap la var pc_ym                        "Poaching cohort"
>         cap la var ratio_cw_new_hire            "Destination firm (# raided w
> orkers / # new hires)"             
>         cap la var rd_coworker_fe               "Avg. AKM FE of raided cowork
> ers"   
>         cap la var rd_coworker_n                "Number of raided coworkers"
>         cap la var rd_coworker_n_ln             "Ln of number of raided cowor
> kers"      
>         cap la var rd_coworker_wage_d_lvl       "Wage of raided coworker at d
> est. firm (level)" 
>         cap la var rd_coworker_wage_o_lvl       "Wage of raided coworker at o
> rigin firm (level)" 
>         
>         // saving
>         save "${data}/202503_poach_ind_`e'", replace
>         
>         }
>                 
> *--------------------------*
> * EXIT
> *--------------------------*
> 
> // REMOVE TEMP FILES!!!! 
>         

end of do-file

.         *do "${prepare}/202503_poach_ind_LOOP7"
.         
.         // identifying event types (using destination occupation)
.         *do "${prepare}/evt_type_m"
.         
.         // imposing sample selection restrictions to the analysis
.         *do "${prepare}/sample_selection"
.         
. // PART IV: constructing main data sets
. 
.         *do "${prepare}/202503_poaching_evt"
. 
. *-----------------------------------------*
. * ANALYSIS (FINAL) - FELIPE: USE THIS
. *-----------------------------------------*
. 
. // MAIN ANALYSIS
. 
.         // imposing restrictions and listing the events we want
.         *do "${analysis}/eventlist"     
.         
.         // exhibits
.         *do "${analysis}/final_sumstats"
.         *do "${analysis}/final_pred1"
.         *do "${analysis}/final_pred2"
.         *do "${analysis}/final_pred3"
.         *do "${analysis}/final_pred4"
.         *do "${analysis}/final_pred5"
.         *do "${analysis}/final_pred6"
.         *do "${analysis}/final_pred7"
.         *do "${analysis}/final_alternatives"
.         
.         // other analyses
.         *do "${analysis}/final_preddelta"
.         
. // TESTING OTHER HYPOTHESES
. 
.         // hypothesis: managers are the owners of the destination firm (spino
> ffs)
.         *do "${analysis}/test_spinoffs"
.         
.         // hypothesis: tenure overlap + strength of information 
.         *do "${analysis}/summary_tenureoverlap"
.         
. // ROBUSTNESS: RESULTS WITHOUT RECLASSIFICATIONS        
. 
.         // imposing restrictions and listing the events we want
.         *do "${analysis}/eventlist_noreclass"
.         
.         // organing exhibits before submission
.         *do "${analysis}/final_pred1_noreclass"
.         *do "${analysis}/final_pred2_noreclass"
.         *do "${analysis}/final_pred3_noreclass"
.         *do "${analysis}/final_pred4_noreclass"
.         *do "${analysis}/final_pred5_noreclass"
.         *do "${analysis}/final_pred6_noreclass"
.         *do "${analysis}/final_pred7_noreclass"
.         *do "${analysis}/final_alternatives_noreclass"
. 
. // ROBUSTNESS: TABLES WITH 0 RAIDES
. 
.         *do "${analysis}/final_pred4_zero"
.         *do "${analysis}/final_pred5_zero"
.         *do "${analysis}/final_alternatives_zero"
.         
.         *do "${analysis}/final_pred4_zeroonly"
.         *do "${analysis}/final_pred5_zeroonly"
.         *do "${analysis}/final_alternatives_zeroonly"
. 
. *-----------------------------------------*
. * ANALYSIS (202503 WORK) -- FABIANO'S STUFF
. *-----------------------------------------*
. 
. // MAIN ANALYSIS
. 
.         // imposing restrictions and listing the events we want
.         *do "${analysis}/eventlist"     
.         
.         // exhibits
.         *do "${analysis}/202503_sumstats"
.         *do "${analysis}/202503_pred1"
.         *do "${analysis}/202503_pred2"
.         *do "${analysis}/final_pred3"
.         *do "${analysis}/202503_pred4"
.         *do "${analysis}/202503_pred5"
.         *do "${analysis}/202503_pred6"
.         *do "${analysis}/final_pred7"
.         *do "${analysis}/final_alternatives"
.         
.         // other analyses
.         *do "${analysis}/final_preddelta"
.         
. // TESTING OTHER HYPOTHESES
. 
.         // hypothesis: managers are the owners of the destination firm (spino
> ffs)
.         *do "${analysis}/test_spinoffs"
.         
.         // hypothesis: tenure overlap + strength of information 
.         *do "${analysis}/summary_tenureoverlap"
.         
. // ROBUSTNESS: RESULTS WITHOUT RECLASSIFICATIONS        
. 
.         // imposing restrictions and listing the events we want
.         *do "${analysis}/eventlist_noreclass"
.         
.         // organing exhibits before submission
.         *do "${analysis}/final_pred1_noreclass"
.         *do "${analysis}/final_pred2_noreclass"
.         *do "${analysis}/final_pred3_noreclass"
.         *do "${analysis}/final_pred4_noreclass"
.         *do "${analysis}/final_pred5_noreclass"
.         *do "${analysis}/final_pred6_noreclass"
.         *do "${analysis}/final_pred7_noreclass"
.         *do "${analysis}/final_alternatives_noreclass"
. 
. // ROBUSTNESS: TABLES WITH 0 RAIDES
. 
.         *do "${analysis}/final_pred4_zero"
.         *do "${analysis}/final_pred5_zero"
.         *do "${analysis}/final_alternatives_zero"
.         
.         *do "${analysis}/final_pred4_zeroonly"
.         *do "${analysis}/final_pred5_zeroonly"
.         *do "${analysis}/final_alternatives_zeroonly"
. 
. 
. 
. 
. 
.         
. 
. 
. 
.         
. 
. *****************************************************************************
> **
. /* ARCHIVE
> 
> *--------------------------- mar 27 2025 archive ----------------------------
> ---
> 
>         // Figure 1: 
>         
>                 // baseline graph
>                 do "${analysis}/es_baseline"
>         
>                 // understanding baseline (raw averages)
>                 do "${analysis}/es_baseline_raw" // FD NOTE: I haven't organi
> zed this yet
>         
>         // Figure 2: 
>         
>                 // quality of new hires
>                 do "${analysis}/quality_dest_hire"
>         
>         // Table 1:
>         
>                 // summary statistics
>                 do "${analysis}/summary_statistics"
>         
>         // Table 2
>         
>                 // information available
>                 do "${analysis}/table2"
>                 
>         // Table 3
>         
>                 // information is needed
>                 do "${analysis}/table3"
>                 
>         // Destination growth
>         
>                 // # of hires and # total employess
>                 do "${analysis}/destgrowth"
>                 
>         // Trying something different: overlap between spv-spv and emp-emp
>         do "${analysis}/overlap"
>         
>         // Review why there are missing values
>         do "${auxiliary}/review_missing_variables"
>         
>         // Check if some variables are created correctly
>         do "${auxiliary}/vars_dont_look_right"
>         
>         // Check creation of variables for which we nly had the log
>         do "${auxiliary}/check_vars_in_levels"
> 
> *--------------------------- nov 19 2024 archive ----------------------------
> ---
> 
>         // Figure 3: 
>         
>                 // CDF quality at origin
>                 do "${analysis}/quality_origin"
>         
>                 // reg quality at origin
>                 do "${analysis}/reg_quality_origin"
>                 
>                 // generating CDF for subset of events that have at least 1 r
> aided worker and at least 1 moveable worker
>                 do "${analysis}/quality_origin_sel_evts"
>                 
>         // Table 2:
>         
>                 // v1
>                 do "${analysis}/table2"
>         
>                 // v2: include ind. and event time FE
>                 do "${analysis}/table2_v2"
> 
>         // Table 3:
>         
>                 // v1
>                 do "${analysis}/table3"
>         
>                 // v2: include ind. and event time FE
>                 do "${analysis}/table3_v2"
>                 
> *-------------------------- other archive -----------------------------------
> --
> 
> 
>         // firm-level event study: baseline figures with raw averages
>         *do "${analysis}/es_raw_firm"
>         
>         // firm-level event study: analysis using regressions
>         *do "${analysis}/es_reg_firm"
>         
>                 // heterogeneity: by type of movement (to dir, to spv, to emp
> )
>                 *do "${analysis}/es_reg_firm_type"
>                 
>                 // heterogeneity: by origin firm size
>                 *do "${analysis}/es_reg_firm_originsize"
>                 
>                 // heterogeneity: by destination firm size
>                 *do "${analysis}/es_reg_firm_destinationsize"
>                 
>                 // heterogeneity: by region (same or different)
>                 *do "${analysis}/es_reg_firm_region"
>         
>         // hires-level "event study" -- ?? -- tentative analysis so far 
>         *do "${analysis}/es_reg_hires"
>         
>         // table: wage regressions
>         
>                 // testing information hypothesis
>                 *do "${analysis}/reg_wage_info"         
> 
> *------------------------------ monthly rs ----------------------------------
> ---
> 
>         // prepare
> 
>                 // organizing full RAIS (monthly panel)
>                 do "programs/prepare/archive_20240708/rais_m_rs"
>                 
>                 // identifying poaching events
>                 do "programs/prepare/archive_20240708/evt_m_rs"
>                 
>                 // constructing worker-level data set with poaching events in
>  t=0
>                 do "programs/prepare/archive_20240708/evt_work_m_rs"
>                 
>                 // constructing worker-level panel with coworkers only
>                 do "programs/prepare/archive_20240708/cowork_panel_m_rs"
>                 
>                 // constructing event-level panel with poaching plants (d_pla
> nts)
>                 do "programs/prepare/archive_20240708/evt_panel_m_rs"
>                 
>                 // auxiliary data set: wages for coworkers
>                 do "programs/prepare/archive_20240708/wage_real_ln_cw"
>                 
>         // analysis
>         
>                 // sample selection (imposing additional criteria on the even
> ts)
>                 do "programs/analysis/archive_20240708/sample_selection"
> 
>                 // summary stats
>                 do "programs/analysis/archive_20240708/sumstats"
>         
>                 // firm-level event study
>                 do "programs/analysis/archive_20240708/es_firm_dir"
>         
>                 // wage distribution: before vs. after poaching
>                 do "programs/analysis/archive_20240708/wage_dist_dir"
>         
>                 // wage regression: poached workers only; correlation with "i
> nformation"
>                 do "programs/analysis/archive_20240708/wage_corrinfo_dir"
>         
>                 // wage regression: comparison with similar retained workers
>                 do "programs/analysis/archive_20240708/wage_xretained_dir"
> 
> 
> *------------------------------- quarterly ----------------------------------
> ---
> 
>         // organizing quarterly panel
>         do "programs/prepare/archive_20240430/RAIS_Quarterly_RS"
>         
>         // identifying poaching events
>         do "programs/prepare/archive_20240430/PoachingEvents_Quarterly_RS"
>         
>                 // Daniela's version
>                 do "programs/prepare/archive_20240430/evtdefine"
>         
>         // constructing the panel with coworkers
>         do "programs/prepare/archive_20240430/CoWorkers_Panel_Quarterly_RS"
>         
>                 // Daniela's version
>                 do "programs/prepare/archive_20240430/coworker_panel_q_rs"
>         
>         // creating the panel with poaching firms
>         do "programs/prepare/archive_20240430/PoachingEvents_Panel_Quarterly_
> RS"
>         
>                 // Daniela's version
>                 do "programs/prepare/archive_20240430/events_panel_rs" 
>                 

end of do-file
